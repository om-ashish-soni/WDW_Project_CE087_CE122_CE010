<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content=
		"width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

	<title>Speech to Text</title>
</head>

<body>
	<div class="words" contenteditable>
		<p id="p"></p>
	</div>
    <button class="btn btn-outline-success" id="start">start</button>

	<script>
            document.getElementById('clock').style.display = "block";
    document.getElementById('clock').innerHTML = "00:20";
    let min=0,sec=20;
    function displayTime(){
        document.getElementById('clock').innerHTML = `${min}:${sec}`;
        sec--;
        if(sec==0){
            min--;
            sec=60;
        }
        if(min==-1 && sec==60){
            clearInterval(mySetInterval);
            
    
            
            done_task_h1.innerHTML = "time out\nclick on next task";
            done_task.style.display = 'block';
            document.getElementById('page3').style.display = 'none';
            document.getElementById('clock').style.display = 'none';
            checking();
        }
    }
    document.getElementById('start').onclick=()=>{          
      var speech = true;
            window.SpeechRecognition = window.SpeechRecognition
                            || window.webkitSpeechRecognition;

            const recognition = new SpeechRecognition();
            recognition.interimResults = true;
            recognition.continuous=true;
            const words = document.querySelector('.words');
            words.appendChild(p);

            recognition.addEventListener('result', e => {
                const transcript = Array.from(e.results)
                    .map(result => result[0])
                    .map(result => result.transcript)
                    .join('')

                document.getElementById("p").innerHTML = transcript;
                console.log(transcript);
            });
            
            if (speech == true) {
                recognition.start();
                recognition.addEventListener('end', recognition.start);
            }
        };
	</script>
</body>

</html>
